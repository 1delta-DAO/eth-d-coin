{"abi":[{"type":"function","name":"checkAccountStatus","inputs":[{"name":"account","type":"address","internalType":"address"},{"name":"collaterals","type":"address[]","internalType":"address[]"}],"outputs":[{"name":"magicValue","type":"bytes4","internalType":"bytes4"}],"stateMutability":"view"},{"type":"function","name":"checkVaultStatus","inputs":[],"outputs":[{"name":"magicValue","type":"bytes4","internalType":"bytes4"}],"stateMutability":"nonpayable"},{"type":"function","name":"disableController","inputs":[],"outputs":[],"stateMutability":"nonpayable"},{"type":"error","name":"ControllerDisabled","inputs":[]},{"type":"error","name":"NotAuthorized","inputs":[]},{"type":"error","name":"Reentrancy","inputs":[]},{"type":"error","name":"SharesSeizureFailed","inputs":[]}],"bytecode":{"object":"0x","sourceMap":"","linkReferences":{}},"deployedBytecode":{"object":"0x","sourceMap":"","linkReferences":{}},"methodIdentifiers":{"checkAccountStatus(address,address[])":"b168c58f","checkVaultStatus()":"4b3d1223","disableController()":"869e50c7"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.20+commit.a1b79de6\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"name\":\"ControllerDisabled\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"NotAuthorized\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"Reentrancy\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"SharesSeizureFailed\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"},{\"internalType\":\"address[]\",\"name\":\"collaterals\",\"type\":\"address[]\"}],\"name\":\"checkAccountStatus\",\"outputs\":[{\"internalType\":\"bytes4\",\"name\":\"magicValue\",\"type\":\"bytes4\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"checkVaultStatus\",\"outputs\":[{\"internalType\":\"bytes4\",\"name\":\"magicValue\",\"type\":\"bytes4\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"disableController\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\"devdoc\":{\"details\":\"This contract is an abstract base contract for Vaults. It declares functions that must be defined in the child contract in order to correctly implement the controller release, vault status snapshotting and account/vaults status checks.\",\"kind\":\"dev\",\"methods\":{\"checkAccountStatus(address,address[])\":{\"details\":\"Executed on a controller as a result of requiring account status check on the EVC.\"},\"checkVaultStatus()\":{\"details\":\"Executed as a result of requiring vault status check on the EVC.\"},\"disableController()\":{\"details\":\"Must be overridden by child contracts. Must call the EVC.disableController() only if it's safe to do so (i.e. the account has repaid their debt in full)\"}},\"title\":\"VaultBase\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"checkAccountStatus(address,address[])\":{\"notice\":\"Checks the account status\"},\"checkVaultStatus()\":{\"notice\":\"Checks the vault status\"},\"disableController()\":{\"notice\":\"Disables a controller for an account\"}},\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/vaults/VaultBase.sol\":\"VaultBase\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/\",\":ds-test/=lib/forge-std/lib/ds-test/src/\",\":erc4626-tests/=lib/erc4626-tests/\",\":ethereum-vault-connector/=lib/ethereum-vault-connector/\",\":evc-playground/=lib/evc-playground/\",\":evc/=lib/ethereum-vault-connector/src/\",\":forge-std/=lib/forge-std/src/\",\":openzeppelin-contracts/=lib/openzeppelin-contracts/\",\":openzeppelin/=lib/openzeppelin-contracts/contracts/\",\":solmate/=lib/solmate/src/\"]},\"sources\":{\"lib/ethereum-vault-connector/src/interfaces/IEthereumVaultConnector.sol\":{\"keccak256\":\"0x97c6499c711996badb71abcef96f25781ded49f20d0dc74d32fb895d4361709f\",\"license\":\"GPL-2.0-or-later\",\"urls\":[\"bzz-raw://d7db93b050b41a8032926da9cf9cfb26f2453c4c6c4e8e8f15ae6e3db9ddab56\",\"dweb:/ipfs/QmTDgMFG9BRmwa3Z79xfw45im74kURDXT93vkRheVVFEnu\"]},\"lib/ethereum-vault-connector/src/interfaces/IVault.sol\":{\"keccak256\":\"0x94fde497747dd6123420d750e881ad267c4003f794554c76c95bd4bb34c6bd13\",\"license\":\"GPL-2.0-or-later\",\"urls\":[\"bzz-raw://a1fa6526dc4088c46e8de7a0b532fd3a2f7ee2b5f92362895b530d52621208c4\",\"dweb:/ipfs/QmVi29xhnSoXWrciXrHZzEwAy7oJJE95syqRWUHf6hrkUo\"]},\"lib/ethereum-vault-connector/src/utils/EVCUtil.sol\":{\"keccak256\":\"0x6793ed525eee008450ac9e065f9a1321539a8c0b55440695e2e51830ebd77570\",\"license\":\"GPL-2.0-or-later\",\"urls\":[\"bzz-raw://aec91f78e2fdf03a979ed1f1623dbe256b783d3fc99ad9cc460a3f92904834a7\",\"dweb:/ipfs/QmYr9rzsfekrk9ckYzNSEkfzgXFpCKMY9SGDZ4F96zNuCs\"]},\"src/utils/EVCClient.sol\":{\"keccak256\":\"0x8d80b044bcd7774075d030bdc6906b4b49845ad673db3b89cbaa11ef7cf6f452\",\"license\":\"GPL-2.0-or-later\",\"urls\":[\"bzz-raw://7021ce7d77f7d6bdc2d917e705493221f6d5c4129cab35b7792fc29e7f154729\",\"dweb:/ipfs/QmNWrVRZDvSxhqS1KtGaXDnCN8ePZZdRnMpJJDAri1GGtk\"]},\"src/vaults/VaultBase.sol\":{\"keccak256\":\"0xc6748d6d48c556ac9b4fb8b67ab1a54b37e25306f337d6997a80cff2e904b0c3\",\"license\":\"GPL-2.0-or-later\",\"urls\":[\"bzz-raw://e32e38c1a7562979b39cd0fa2c620ec8cba74ba176ba0cf38d063f638dcb55b3\",\"dweb:/ipfs/QmaA3qLhewj2r9Z58dadmJLqeWqQXbpsKT9ySiAFHSU8re\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.20+commit.a1b79de6"},"language":"Solidity","output":{"abi":[{"inputs":[],"type":"error","name":"ControllerDisabled"},{"inputs":[],"type":"error","name":"NotAuthorized"},{"inputs":[],"type":"error","name":"Reentrancy"},{"inputs":[],"type":"error","name":"SharesSeizureFailed"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"address[]","name":"collaterals","type":"address[]"}],"stateMutability":"view","type":"function","name":"checkAccountStatus","outputs":[{"internalType":"bytes4","name":"magicValue","type":"bytes4"}]},{"inputs":[],"stateMutability":"nonpayable","type":"function","name":"checkVaultStatus","outputs":[{"internalType":"bytes4","name":"magicValue","type":"bytes4"}]},{"inputs":[],"stateMutability":"nonpayable","type":"function","name":"disableController"}],"devdoc":{"kind":"dev","methods":{"checkAccountStatus(address,address[])":{"details":"Executed on a controller as a result of requiring account status check on the EVC."},"checkVaultStatus()":{"details":"Executed as a result of requiring vault status check on the EVC."},"disableController()":{"details":"Must be overridden by child contracts. Must call the EVC.disableController() only if it's safe to do so (i.e. the account has repaid their debt in full)"}},"version":1},"userdoc":{"kind":"user","methods":{"checkAccountStatus(address,address[])":{"notice":"Checks the account status"},"checkVaultStatus()":{"notice":"Checks the vault status"},"disableController()":{"notice":"Disables a controller for an account"}},"version":1}},"settings":{"remappings":["@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/","ds-test/=lib/forge-std/lib/ds-test/src/","erc4626-tests/=lib/erc4626-tests/","ethereum-vault-connector/=lib/ethereum-vault-connector/","evc-playground/=lib/evc-playground/","evc/=lib/ethereum-vault-connector/src/","forge-std/=lib/forge-std/src/","openzeppelin-contracts/=lib/openzeppelin-contracts/","openzeppelin/=lib/openzeppelin-contracts/contracts/","solmate/=lib/solmate/src/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"src/vaults/VaultBase.sol":"VaultBase"},"libraries":{}},"sources":{"lib/ethereum-vault-connector/src/interfaces/IEthereumVaultConnector.sol":{"keccak256":"0x97c6499c711996badb71abcef96f25781ded49f20d0dc74d32fb895d4361709f","urls":["bzz-raw://d7db93b050b41a8032926da9cf9cfb26f2453c4c6c4e8e8f15ae6e3db9ddab56","dweb:/ipfs/QmTDgMFG9BRmwa3Z79xfw45im74kURDXT93vkRheVVFEnu"],"license":"GPL-2.0-or-later"},"lib/ethereum-vault-connector/src/interfaces/IVault.sol":{"keccak256":"0x94fde497747dd6123420d750e881ad267c4003f794554c76c95bd4bb34c6bd13","urls":["bzz-raw://a1fa6526dc4088c46e8de7a0b532fd3a2f7ee2b5f92362895b530d52621208c4","dweb:/ipfs/QmVi29xhnSoXWrciXrHZzEwAy7oJJE95syqRWUHf6hrkUo"],"license":"GPL-2.0-or-later"},"lib/ethereum-vault-connector/src/utils/EVCUtil.sol":{"keccak256":"0x6793ed525eee008450ac9e065f9a1321539a8c0b55440695e2e51830ebd77570","urls":["bzz-raw://aec91f78e2fdf03a979ed1f1623dbe256b783d3fc99ad9cc460a3f92904834a7","dweb:/ipfs/QmYr9rzsfekrk9ckYzNSEkfzgXFpCKMY9SGDZ4F96zNuCs"],"license":"GPL-2.0-or-later"},"src/utils/EVCClient.sol":{"keccak256":"0x8d80b044bcd7774075d030bdc6906b4b49845ad673db3b89cbaa11ef7cf6f452","urls":["bzz-raw://7021ce7d77f7d6bdc2d917e705493221f6d5c4129cab35b7792fc29e7f154729","dweb:/ipfs/QmNWrVRZDvSxhqS1KtGaXDnCN8ePZZdRnMpJJDAri1GGtk"],"license":"GPL-2.0-or-later"},"src/vaults/VaultBase.sol":{"keccak256":"0xc6748d6d48c556ac9b4fb8b67ab1a54b37e25306f337d6997a80cff2e904b0c3","urls":["bzz-raw://e32e38c1a7562979b39cd0fa2c620ec8cba74ba176ba0cf38d063f638dcb55b3","dweb:/ipfs/QmaA3qLhewj2r9Z58dadmJLqeWqQXbpsKT9ySiAFHSU8re"],"license":"GPL-2.0-or-later"}},"version":1},"ast":{"absolutePath":"src/vaults/VaultBase.sol","id":64377,"exportedSymbols":{"EVCClient":[64065],"EVCUtil":[8275],"IEVC":[8021],"IVault":[8046],"VaultBase":[64376]},"nodeType":"SourceUnit","src":"46:3360:79","nodes":[{"id":64224,"nodeType":"PragmaDirective","src":"46:24:79","nodes":[],"literals":["solidity","^","0.8",".19"]},{"id":64225,"nodeType":"ImportDirective","src":"72:35:79","nodes":[],"absolutePath":"lib/ethereum-vault-connector/src/interfaces/IVault.sol","file":"evc/interfaces/IVault.sol","nameLocation":"-1:-1:-1","scope":64377,"sourceUnit":8047,"symbolAliases":[],"unitAlias":""},{"id":64226,"nodeType":"ImportDirective","src":"108:32:79","nodes":[],"absolutePath":"src/utils/EVCClient.sol","file":"../utils/EVCClient.sol","nameLocation":"-1:-1:-1","scope":64377,"sourceUnit":64066,"symbolAliases":[],"unitAlias":""},{"id":64376,"nodeType":"ContractDefinition","src":"420:2985:79","nodes":[{"id":64233,"nodeType":"ErrorDefinition","src":"475:19:79","nodes":[],"errorSelector":"ab143c06","name":"Reentrancy","nameLocation":"481:10:79","parameters":{"id":64232,"nodeType":"ParameterList","parameters":[],"src":"491:2:79"}},{"id":64236,"nodeType":"VariableDeclaration","src":"500:48:79","nodes":[],"constant":true,"mutability":"constant","name":"REENTRANCY_UNLOCKED","nameLocation":"525:19:79","scope":64376,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":64234,"name":"uint256","nodeType":"ElementaryTypeName","src":"500:7:79","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":{"hexValue":"31","id":64235,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"547:1:79","typeDescriptions":{"typeIdentifier":"t_rational_1_by_1","typeString":"int_const 1"},"value":"1"},"visibility":"private"},{"id":64239,"nodeType":"VariableDeclaration","src":"554:46:79","nodes":[],"constant":true,"mutability":"constant","name":"REENTRANCY_LOCKED","nameLocation":"579:17:79","scope":64376,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":64237,"name":"uint256","nodeType":"ElementaryTypeName","src":"554:7:79","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":{"hexValue":"32","id":64238,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"599:1:79","typeDescriptions":{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"},"value":"2"},"visibility":"private"},{"id":64241,"nodeType":"VariableDeclaration","src":"607:30:79","nodes":[],"constant":false,"mutability":"mutable","name":"reentrancyLock","nameLocation":"623:14:79","scope":64376,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":64240,"name":"uint256","nodeType":"ElementaryTypeName","src":"607:7:79","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"private"},{"id":64243,"nodeType":"VariableDeclaration","src":"643:22:79","nodes":[],"constant":false,"mutability":"mutable","name":"snapshot","nameLocation":"657:8:79","scope":64376,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes_storage","typeString":"bytes"},"typeName":{"id":64242,"name":"bytes","nodeType":"ElementaryTypeName","src":"643:5:79","typeDescriptions":{"typeIdentifier":"t_bytes_storage_ptr","typeString":"bytes"}},"visibility":"private"},{"id":64257,"nodeType":"FunctionDefinition","src":"672:92:79","nodes":[],"body":{"id":64256,"nodeType":"Block","src":"711:53:79","nodes":[],"statements":[{"expression":{"id":64254,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":64252,"name":"reentrancyLock","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64241,"src":"721:14:79","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":64253,"name":"REENTRANCY_UNLOCKED","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64236,"src":"738:19:79","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"721:36:79","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":64255,"nodeType":"ExpressionStatement","src":"721:36:79"}]},"implemented":true,"kind":"constructor","modifiers":[{"arguments":[{"id":64249,"name":"_evc","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64246,"src":"705:4:79","typeDescriptions":{"typeIdentifier":"t_contract$_IEVC_$8021","typeString":"contract IEVC"}}],"id":64250,"kind":"baseConstructorSpecifier","modifierName":{"id":64248,"name":"EVCClient","nameLocations":["695:9:79"],"nodeType":"IdentifierPath","referencedDeclaration":64065,"src":"695:9:79"},"nodeType":"ModifierInvocation","src":"695:15:79"}],"name":"","nameLocation":"-1:-1:-1","parameters":{"id":64247,"nodeType":"ParameterList","parameters":[{"constant":false,"id":64246,"mutability":"mutable","name":"_evc","nameLocation":"689:4:79","nodeType":"VariableDeclaration","scope":64257,"src":"684:9:79","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_IEVC_$8021","typeString":"contract IEVC"},"typeName":{"id":64245,"nodeType":"UserDefinedTypeName","pathNode":{"id":64244,"name":"IEVC","nameLocations":["684:4:79"],"nodeType":"IdentifierPath","referencedDeclaration":8021,"src":"684:4:79"},"referencedDeclaration":8021,"src":"684:4:79","typeDescriptions":{"typeIdentifier":"t_contract$_IEVC_$8021","typeString":"contract IEVC"}},"visibility":"internal"}],"src":"683:11:79"},"returnParameters":{"id":64251,"nodeType":"ParameterList","parameters":[],"src":"711:0:79"},"scope":64376,"stateMutability":"nonpayable","virtual":false,"visibility":"internal"},{"id":64278,"nodeType":"ModifierDefinition","src":"806:239:79","nodes":[],"body":{"id":64277,"nodeType":"Block","src":"838:207:79","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":64262,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":64260,"name":"reentrancyLock","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64241,"src":"852:14:79","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"id":64261,"name":"REENTRANCY_UNLOCKED","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64236,"src":"870:19:79","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"852:37:79","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":64267,"nodeType":"IfStatement","src":"848:87:79","trueBody":{"id":64266,"nodeType":"Block","src":"891:44:79","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":64263,"name":"Reentrancy","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64233,"src":"912:10:79","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":64264,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"912:12:79","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":64265,"nodeType":"RevertStatement","src":"905:19:79"}]}},{"expression":{"id":64270,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":64268,"name":"reentrancyLock","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64241,"src":"945:14:79","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":64269,"name":"REENTRANCY_LOCKED","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64239,"src":"962:17:79","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"945:34:79","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":64271,"nodeType":"ExpressionStatement","src":"945:34:79"},{"id":64272,"nodeType":"PlaceholderStatement","src":"990:1:79"},{"expression":{"id":64275,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":64273,"name":"reentrancyLock","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64241,"src":"1002:14:79","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":64274,"name":"REENTRANCY_UNLOCKED","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64236,"src":"1019:19:79","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1002:36:79","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":64276,"nodeType":"ExpressionStatement","src":"1002:36:79"}]},"documentation":{"id":64258,"nodeType":"StructuredDocumentation","src":"770:31:79","text":"@notice Prevents reentrancy"},"name":"nonReentrant","nameLocation":"815:12:79","parameters":{"id":64259,"nodeType":"ParameterList","parameters":[],"src":"827:2:79"},"virtual":true,"visibility":"internal"},{"id":64291,"nodeType":"ModifierDefinition","src":"1133:149:79","nodes":[],"body":{"id":64290,"nodeType":"Block","src":"1167:115:79","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":64283,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":64281,"name":"reentrancyLock","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64241,"src":"1181:14:79","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"id":64282,"name":"REENTRANCY_UNLOCKED","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64236,"src":"1199:19:79","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1181:37:79","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":64288,"nodeType":"IfStatement","src":"1177:87:79","trueBody":{"id":64287,"nodeType":"Block","src":"1220:44:79","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":64284,"name":"Reentrancy","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64233,"src":"1241:10:79","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":64285,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1241:12:79","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":64286,"nodeType":"RevertStatement","src":"1234:19:79"}]}},{"id":64289,"nodeType":"PlaceholderStatement","src":"1274:1:79"}]},"documentation":{"id":64279,"nodeType":"StructuredDocumentation","src":"1051:77:79","text":"@notice Prevents read-only reentrancy (should be used for view functions)"},"name":"nonReentrantRO","nameLocation":"1142:14:79","parameters":{"id":64280,"nodeType":"ParameterList","parameters":[],"src":"1156:2:79"},"virtual":true,"visibility":"internal"},{"id":64307,"nodeType":"FunctionDefinition","src":"1342:483:79","nodes":[],"body":{"id":64306,"nodeType":"Block","src":"1382:443:79","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":64298,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":64295,"name":"snapshot","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64243,"src":"1738:8:79","typeDescriptions":{"typeIdentifier":"t_bytes_storage","typeString":"bytes storage ref"}},"id":64296,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"1747:6:79","memberName":"length","nodeType":"MemberAccess","src":"1738:15:79","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":64297,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1757:1:79","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"1738:20:79","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":64305,"nodeType":"IfStatement","src":"1734:85:79","trueBody":{"id":64304,"nodeType":"Block","src":"1760:59:79","statements":[{"expression":{"id":64302,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":64299,"name":"snapshot","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64243,"src":"1774:8:79","typeDescriptions":{"typeIdentifier":"t_bytes_storage","typeString":"bytes storage ref"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[],"expression":{"argumentTypes":[],"id":64300,"name":"doCreateVaultSnapshot","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64356,"src":"1785:21:79","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$__$returns$_t_bytes_memory_ptr_$","typeString":"function () returns (bytes memory)"}},"id":64301,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1785:23:79","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}},"src":"1774:34:79","typeDescriptions":{"typeIdentifier":"t_bytes_storage","typeString":"bytes storage ref"}},"id":64303,"nodeType":"ExpressionStatement","src":"1774:34:79"}]}}]},"documentation":{"id":64292,"nodeType":"StructuredDocumentation","src":"1288:49:79","text":"@notice Creates a snapshot of the vault state"},"implemented":true,"kind":"function","modifiers":[],"name":"createVaultSnapshot","nameLocation":"1351:19:79","parameters":{"id":64293,"nodeType":"ParameterList","parameters":[],"src":"1370:2:79"},"returnParameters":{"id":64294,"nodeType":"ParameterList","parameters":[],"src":"1382:0:79"},"scope":64376,"stateMutability":"nonpayable","virtual":false,"visibility":"internal"},{"id":64327,"nodeType":"FunctionDefinition","src":"1949:213:79","nodes":[],"body":{"id":64326,"nodeType":"Block","src":"2042:120:79","nodes":[],"statements":[{"expression":{"arguments":[{"id":64316,"name":"snapshot","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64243,"src":"2071:8:79","typeDescriptions":{"typeIdentifier":"t_bytes_storage","typeString":"bytes storage ref"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes_storage","typeString":"bytes storage ref"}],"id":64315,"name":"doCheckVaultStatus","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64362,"src":"2052:18:79","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_bytes_memory_ptr_$returns$__$","typeString":"function (bytes memory)"}},"id":64317,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2052:28:79","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":64318,"nodeType":"ExpressionStatement","src":"2052:28:79"},{"expression":{"id":64320,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"delete","prefix":true,"src":"2090:15:79","subExpression":{"id":64319,"name":"snapshot","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64243,"src":"2097:8:79","typeDescriptions":{"typeIdentifier":"t_bytes_storage","typeString":"bytes storage ref"}},"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":64321,"nodeType":"ExpressionStatement","src":"2090:15:79"},{"expression":{"expression":{"expression":{"id":64322,"name":"IVault","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8046,"src":"2123:6:79","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IVault_$8046_$","typeString":"type(contract IVault)"}},"id":64323,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"2130:16:79","memberName":"checkVaultStatus","nodeType":"MemberAccess","referencedDeclaration":8045,"src":"2123:23:79","typeDescriptions":{"typeIdentifier":"t_function_declaration_nonpayable$__$returns$_t_bytes4_$","typeString":"function IVault.checkVaultStatus() returns (bytes4)"}},"id":64324,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"2147:8:79","memberName":"selector","nodeType":"MemberAccess","src":"2123:32:79","typeDescriptions":{"typeIdentifier":"t_bytes4","typeString":"bytes4"}},"functionReturnParameters":64314,"id":64325,"nodeType":"Return","src":"2116:39:79"}]},"baseFunctions":[8045],"documentation":{"id":64308,"nodeType":"StructuredDocumentation","src":"1831:113:79","text":"@notice Checks the vault status\n @dev Executed as a result of requiring vault status check on the EVC."},"functionSelector":"4b3d1223","implemented":true,"kind":"function","modifiers":[{"id":64311,"kind":"modifierInvocation","modifierName":{"id":64310,"name":"onlyEVCWithChecksInProgress","nameLocations":["1986:27:79"],"nodeType":"IdentifierPath","referencedDeclaration":8156,"src":"1986:27:79"},"nodeType":"ModifierInvocation","src":"1986:27:79"}],"name":"checkVaultStatus","nameLocation":"1958:16:79","parameters":{"id":64309,"nodeType":"ParameterList","parameters":[],"src":"1974:2:79"},"returnParameters":{"id":64314,"nodeType":"ParameterList","parameters":[{"constant":false,"id":64313,"mutability":"mutable","name":"magicValue","nameLocation":"2030:10:79","nodeType":"VariableDeclaration","scope":64327,"src":"2023:17:79","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes4","typeString":"bytes4"},"typeName":{"id":64312,"name":"bytes4","nodeType":"ElementaryTypeName","src":"2023:6:79","typeDescriptions":{"typeIdentifier":"t_bytes4","typeString":"bytes4"}},"visibility":"internal"}],"src":"2022:19:79"},"scope":64376,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":64350,"nodeType":"FunctionDefinition","src":"2306:280:79","nodes":[],"body":{"id":64349,"nodeType":"Block","src":"2475:111:79","nodes":[],"statements":[{"expression":{"arguments":[{"id":64341,"name":"account","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64330,"src":"2506:7:79","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":64342,"name":"collaterals","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64333,"src":"2515:11:79","typeDescriptions":{"typeIdentifier":"t_array$_t_address_$dyn_calldata_ptr","typeString":"address[] calldata"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_array$_t_address_$dyn_calldata_ptr","typeString":"address[] calldata"}],"id":64340,"name":"doCheckAccountStatus","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":64371,"src":"2485:20:79","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_address_$_t_array$_t_address_$dyn_calldata_ptr_$returns$__$","typeString":"function (address,address[] calldata) view"}},"id":64343,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2485:42:79","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":64344,"nodeType":"ExpressionStatement","src":"2485:42:79"},{"expression":{"expression":{"expression":{"id":64345,"name":"IVault","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8046,"src":"2545:6:79","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IVault_$8046_$","typeString":"type(contract IVault)"}},"id":64346,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"2552:18:79","memberName":"checkAccountStatus","nodeType":"MemberAccess","referencedDeclaration":8039,"src":"2545:25:79","typeDescriptions":{"typeIdentifier":"t_function_declaration_nonpayable$_t_address_$_t_array$_t_address_$dyn_calldata_ptr_$returns$_t_bytes4_$","typeString":"function IVault.checkAccountStatus(address,address[] calldata) returns (bytes4)"}},"id":64347,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"2571:8:79","memberName":"selector","nodeType":"MemberAccess","src":"2545:34:79","typeDescriptions":{"typeIdentifier":"t_bytes4","typeString":"bytes4"}},"functionReturnParameters":64339,"id":64348,"nodeType":"Return","src":"2538:41:79"}]},"baseFunctions":[8039],"documentation":{"id":64328,"nodeType":"StructuredDocumentation","src":"2168:133:79","text":"@notice Checks the account status\n @dev Executed on a controller as a result of requiring account status check on the EVC."},"functionSelector":"b168c58f","implemented":true,"kind":"function","modifiers":[{"id":64336,"kind":"modifierInvocation","modifierName":{"id":64335,"name":"onlyEVCWithChecksInProgress","nameLocations":["2419:27:79"],"nodeType":"IdentifierPath","referencedDeclaration":8156,"src":"2419:27:79"},"nodeType":"ModifierInvocation","src":"2419:27:79"}],"name":"checkAccountStatus","nameLocation":"2315:18:79","parameters":{"id":64334,"nodeType":"ParameterList","parameters":[{"constant":false,"id":64330,"mutability":"mutable","name":"account","nameLocation":"2351:7:79","nodeType":"VariableDeclaration","scope":64350,"src":"2343:15:79","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":64329,"name":"address","nodeType":"ElementaryTypeName","src":"2343:7:79","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":64333,"mutability":"mutable","name":"collaterals","nameLocation":"2387:11:79","nodeType":"VariableDeclaration","scope":64350,"src":"2368:30:79","stateVariable":false,"storageLocation":"calldata","typeDescriptions":{"typeIdentifier":"t_array$_t_address_$dyn_calldata_ptr","typeString":"address[]"},"typeName":{"baseType":{"id":64331,"name":"address","nodeType":"ElementaryTypeName","src":"2368:7:79","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":64332,"nodeType":"ArrayTypeName","src":"2368:9:79","typeDescriptions":{"typeIdentifier":"t_array$_t_address_$dyn_storage_ptr","typeString":"address[]"}},"visibility":"internal"}],"src":"2333:71:79"},"returnParameters":{"id":64339,"nodeType":"ParameterList","parameters":[{"constant":false,"id":64338,"mutability":"mutable","name":"magicValue","nameLocation":"2463:10:79","nodeType":"VariableDeclaration","scope":64350,"src":"2456:17:79","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes4","typeString":"bytes4"},"typeName":{"id":64337,"name":"bytes4","nodeType":"ElementaryTypeName","src":"2456:6:79","typeDescriptions":{"typeIdentifier":"t_bytes4","typeString":"bytes4"}},"visibility":"internal"}],"src":"2455:19:79"},"scope":64376,"stateMutability":"view","virtual":false,"visibility":"external"},{"id":64356,"nodeType":"FunctionDefinition","src":"2697:82:79","nodes":[],"documentation":{"id":64351,"nodeType":"StructuredDocumentation","src":"2592:100:79","text":"@notice Creates a snapshot of the vault state\n @dev Must be overridden by child contracts"},"implemented":false,"kind":"function","modifiers":[],"name":"doCreateVaultSnapshot","nameLocation":"2706:21:79","parameters":{"id":64352,"nodeType":"ParameterList","parameters":[],"src":"2727:2:79"},"returnParameters":{"id":64355,"nodeType":"ParameterList","parameters":[{"constant":false,"id":64354,"mutability":"mutable","name":"snapshot","nameLocation":"2769:8:79","nodeType":"VariableDeclaration","scope":64356,"src":"2756:21:79","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes"},"typeName":{"id":64353,"name":"bytes","nodeType":"ElementaryTypeName","src":"2756:5:79","typeDescriptions":{"typeIdentifier":"t_bytes_storage_ptr","typeString":"bytes"}},"visibility":"internal"}],"src":"2755:23:79"},"scope":64376,"stateMutability":"nonpayable","virtual":true,"visibility":"internal"},{"id":64362,"nodeType":"FunctionDefinition","src":"2876:68:79","nodes":[],"documentation":{"id":64357,"nodeType":"StructuredDocumentation","src":"2785:86:79","text":"@notice Checks the vault status\n @dev Must be overridden by child contracts"},"implemented":false,"kind":"function","modifiers":[],"name":"doCheckVaultStatus","nameLocation":"2885:18:79","parameters":{"id":64360,"nodeType":"ParameterList","parameters":[{"constant":false,"id":64359,"mutability":"mutable","name":"snapshot","nameLocation":"2917:8:79","nodeType":"VariableDeclaration","scope":64362,"src":"2904:21:79","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes"},"typeName":{"id":64358,"name":"bytes","nodeType":"ElementaryTypeName","src":"2904:5:79","typeDescriptions":{"typeIdentifier":"t_bytes_storage_ptr","typeString":"bytes"}},"visibility":"internal"}],"src":"2903:23:79"},"returnParameters":{"id":64361,"nodeType":"ParameterList","parameters":[],"src":"2943:0:79"},"scope":64376,"stateMutability":"nonpayable","virtual":true,"visibility":"internal"},{"id":64371,"nodeType":"FunctionDefinition","src":"3043:81:79","nodes":[],"documentation":{"id":64363,"nodeType":"StructuredDocumentation","src":"2950:88:79","text":"@notice Checks the account status\n @dev Must be overridden by child contracts"},"implemented":false,"kind":"function","modifiers":[],"name":"doCheckAccountStatus","nameLocation":"3052:20:79","parameters":{"id":64369,"nodeType":"ParameterList","parameters":[{"constant":false,"id":64365,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":64371,"src":"3073:7:79","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":64364,"name":"address","nodeType":"ElementaryTypeName","src":"3073:7:79","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":64368,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":64371,"src":"3082:18:79","stateVariable":false,"storageLocation":"calldata","typeDescriptions":{"typeIdentifier":"t_array$_t_address_$dyn_calldata_ptr","typeString":"address[]"},"typeName":{"baseType":{"id":64366,"name":"address","nodeType":"ElementaryTypeName","src":"3082:7:79","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":64367,"nodeType":"ArrayTypeName","src":"3082:9:79","typeDescriptions":{"typeIdentifier":"t_array$_t_address_$dyn_storage_ptr","typeString":"address[]"}},"visibility":"internal"}],"src":"3072:29:79"},"returnParameters":{"id":64370,"nodeType":"ParameterList","parameters":[],"src":"3123:0:79"},"scope":64376,"stateMutability":"view","virtual":true,"visibility":"internal"},{"id":64375,"nodeType":"FunctionDefinition","src":"3357:46:79","nodes":[],"baseFunctions":[8028],"documentation":{"id":64372,"nodeType":"StructuredDocumentation","src":"3130:222:79","text":"@notice Disables a controller for an account\n @dev Must be overridden by child contracts. Must call the EVC.disableController() only if it's safe to do so\n (i.e. the account has repaid their debt in full)"},"functionSelector":"869e50c7","implemented":false,"kind":"function","modifiers":[],"name":"disableController","nameLocation":"3366:17:79","parameters":{"id":64373,"nodeType":"ParameterList","parameters":[],"src":"3383:2:79"},"returnParameters":{"id":64374,"nodeType":"ParameterList","parameters":[],"src":"3402:0:79"},"scope":64376,"stateMutability":"nonpayable","virtual":true,"visibility":"external"}],"abstract":true,"baseContracts":[{"baseName":{"id":64228,"name":"IVault","nameLocations":["451:6:79"],"nodeType":"IdentifierPath","referencedDeclaration":8046,"src":"451:6:79"},"id":64229,"nodeType":"InheritanceSpecifier","src":"451:6:79"},{"baseName":{"id":64230,"name":"EVCClient","nameLocations":["459:9:79"],"nodeType":"IdentifierPath","referencedDeclaration":64065,"src":"459:9:79"},"id":64231,"nodeType":"InheritanceSpecifier","src":"459:9:79"}],"canonicalName":"VaultBase","contractDependencies":[],"contractKind":"contract","documentation":{"id":64227,"nodeType":"StructuredDocumentation","src":"142:278:79","text":"@title VaultBase\n @dev This contract is an abstract base contract for Vaults.\n It declares functions that must be defined in the child contract in order to\n correctly implement the controller release, vault status snapshotting and account/vaults\n status checks."},"fullyImplemented":false,"linearizedBaseContracts":[64376,64065,8275,8046],"name":"VaultBase","nameLocation":"438:9:79","scope":64377,"usedErrors":[8055,8057,63839,64233],"usedEvents":[]}],"license":"GPL-2.0-or-later"},"id":79}